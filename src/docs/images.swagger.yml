openapi: 3.0.0
info:
  title: Images API
  description: API for uploading images
  version: 1.0.0
tags:
  - name: Images
    description: Operations related to image uploads
servers:
  - url: http://127.0.0.1:9000/api/v1
    description: Development

paths:
  /images:
    post:
      tags:
        - Images
      summary: Upload a single image
      operationId: uploadImage
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: Image uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SingleImageResponse'
        '400':
          description: Unexpected field, or no files were uploaded
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /images/many:
    post:
      tags:
        - Images
      summary: Upload multiple images
      operationId: uploadManyImages
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: Images uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MultipleImagesResponse'
        '400':
          description: Unexpected field, or no files were uploaded
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnauthorizedResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    ErrorResponse:
      type: object
      properties:
        message:
          type: string
          example: INTERNAL_SERVER_ERROR
        statusCode:
          type: integer
          example: 500
    
    UnauthorizedResponse:
      type: object
      properties:
        message:
          type: string
          example: ACCESS_DENIED
        statusCode:
          type: integer
          example: 401

    SingleImageResponse:
      type: object
      properties:
        statusCode:
          type: integer
          example: 200
        message:
          type: string
          example: SUCCESS
        data:
          type: string
          example: https://id.cloudfront.net/images/a9fd48a9-6a57-484f-8a81-1f2bc1907abe-72f1b1120f9dcc0a1e377d2756412983.jpg

    MultipleImagesResponse:
      type: object
      properties:
        statusCode:
          type: integer
          example: 200
        message:
          type: string
          example: SUCCESS
        data:
          type: array
          items:
            type: string
          example:
            - https://id.cloudfront.net/images/a9fd48a9-6a57-484f-8a81-1f2bc1907abe-72f1b1120f9dcc0a1e377d2756412983.jpg
            - https://id.cloudfront.net/images/7b1b3b7b-6a57-484f-8a81-1f2bc1907abe-72f1b1120f9dcc0a1e377d2756412983.jpg
security:
  - bearerAuth: []